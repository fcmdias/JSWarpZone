<html>

    <head>
        <style>

            body {
                margin: 0;
                padding: 0;
            }
            #cheese {
                top: 150px;
                left: 190px;
                position: absolute;
                width: 30px;
                height: 30px;
                background-color: yellow;
                border: black 1px solid;
            }
        </style>
    </head>
    <body>


        <div id="cheese"></div>

        <p>Use the arrow keys to move the mouse around the page.</p>
        <p>Don't let the mouse touch the block of cheese</p>
        

        <div style="height: 100px; width: 100px; background-color: grey; margin-top:0; position: absolute; top:0px; text-align: center;" id="mouse">Mouse</div>

        <script>




                let trapped = false

                const trap = () => {
                    const p = document.getElementById('mouse');
                    p.textContent = "Caught";
                    p.style.color= "white";
                    trapped = true;
                }



                const removepxstring = (v) => {

                    let i = v.lastIndexOf("px")
                    if (i != -1) {
                        v = v.slice(0, i);
                    } else {
                        v = 0
                    }

                    v = Number(v)

                    return v

                }

                const xaxis = (position0, dir) => {

                    let v = removepxstring(position0)


                    switch (dir) {
                        case 39: 
                            v = v + 10
                            break;
                        case 37: 
                            if (v > 10) {
                                v = v - 10
                            }
                            break;
                    }


                    v = String(v) + "px"

                    return v

                }
                const yaxis = (position0, dir) => {

                    let v = removepxstring(position0)


                    switch (dir) {
                        case 40: 
                            v = v + 10
                            break;
                        case 38: 
                            if (v > 10) {
                                v = v - 10
                            }
                            break;
                    }


                    v = String(v) + "px"

                    return v

                }


                const movemouse = (event) => {

                    if (trapped) {
                        return 
                    }
                    
                    const p = document.getElementById('mouse');
                    let key = event.keyCode
                    
                    if (key == 37 || key == 39) {
                        p.style.marginLeft = xaxis(p.style.marginLeft, key)
                        
                    } else if (key == 38 || key == 40 ) {
                        p.style.marginTop = yaxis(p.style.marginTop, key)

                    }
                    
                    let cheeseRect = document.getElementById('cheese').getBoundingClientRect();
                    let mouseRect = p.getBoundingClientRect();

                    if ((mouseRect.bottom > cheeseRect.top) &
                     (mouseRect.top < cheeseRect.bottom) & 
                     (mouseRect.right > cheeseRect.left) & 
                     (mouseRect.left < cheeseRect.right)
                     ) {
                        trap()
                    }
                }
            
            
            const body = document.getElementsByTagName("BODY")[0];
            body.addEventListener('keydown', movemouse);

        </script>
    </body>
</html>